// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Users

model Developer {
  id                String     @id @default(cuid())
  role              String
  email             String     @unique
  username          String     @unique
  password          String
  firstName         String
  lastName          String
  picture           String?
  website           String?
  twitter           String?
  discord           String?
  github            String?
  instagram         String?
  chats             Chat[]
  jobs              Job[]
  stacks            Stack[]
  skills            Skill[]
  tags              Tag[]
  rate              Rate?      @relation(fields: [rateId], references: [id])
  rateId            String?
  salary            Salary?    @relation(fields: [salaryId], references: [id])
  salaryId          String?
  shift             Shift?     @relation(fields: [shiftId], references: [id])
  shiftId           String?
  position          Position?  @relation(fields: [positionId], references: [id])
  positionId        String?
  location          Location?  @relation(fields: [locationId], references: [id])
  locationId        String?
  timezone          Timezone?  @relation(fields: [timezoneId], references: [id])
  timezoneId        String?
  hours             Hours?     @relation(fields: [hoursId], references: [id])
  hoursId           String?
  seniority         Seniority? @relation(fields: [seniorityId], references: [id])
  seniorityId       String?
  industry          Industry?  @relation(fields: [industryId], references: [id])
  industryId        String?
  profileCompletion Int
  createdAt         DateTime   @default(now())
  updatedAt         DateTime   @updatedAt
}

model Company {
  id         String    @id @default(cuid())
  role       String
  email      String    @unique
  username   String    @unique
  password   String
  name       String
  tagline    String?
  about      String?
  website    String?
  twitter    String?
  discord    String?
  github     String?
  instagram  String?
  logo       String?
  jobs       Job[]
  chats      Chat[]
  managers   Manager[]
  location   Location? @relation(fields: [locationId], references: [name])
  locationId String?
  industry   Industry? @relation(fields: [industryId], references: [name])
  industryId String?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
}

model Manager {
  id        String   @id @default(cuid())
  role      String
  email     String   @unique
  username  String   @unique
  password  String
  firstName String
  lastName  String
  picture   String?
  company   Company? @relation(fields: [companyId], references: [id])
  companyId String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Jobs

model Job {
  id             String      @id @default(cuid())
  title          String?
  description    String?
  employmentType String?
  international  Boolean?
  remote         Boolean?
  requirements   String[]
  contactEmail   String?
  applicants     Developer[]
  company        Company?    @relation(fields: [companyId], references: [id])
  companyId      String?
  chats          Chat[]
  stacks         Stack[]
  skills         Skill[]
  tags           Tag[]
  rate           Rate?       @relation(fields: [rateId], references: [id])
  rateId         String?
  salary         Salary?     @relation(fields: [salaryId], references: [id])
  salaryId       String?
  shift          Shift?      @relation(fields: [shiftId], references: [id])
  shiftId        String?
  position       Position?   @relation(fields: [positionId], references: [id])
  positionId     String?
  location       Location?   @relation(fields: [locationId], references: [id])
  locationId     String?
  timezone       Timezone?   @relation(fields: [timezoneId], references: [id])
  timezoneId     String?
  hours          Hours?      @relation(fields: [hoursId], references: [id])
  hoursId        String?
  seniority      Seniority?  @relation(fields: [seniorityId], references: [id])
  seniorityId    String?
  industry       Industry?   @relation(fields: [industryId], references: [id])
  industryId     String?
  published      Boolean?    @default(false)
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
}

model Location {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
  companies  Company[]
}

model Skill {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
}

model Stack {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
}

model Tag {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
}

model Position {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
}

model Industry {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
  companies  Company[]
}

model Salary {
  id         String      @id @default(cuid())
  name       String      @unique
  min        Int
  max        Int
  jobs       Job[]
  developers Developer[]
}

model Seniority {
  id         String      @id @default(cuid())
  name       String      @unique
  jobs       Job[]
  developers Developer[]
}

model Rate {
  id         String      @id @default(cuid())
  name       String      @unique
  value      Int
  jobs       Job[]
  developers Developer[]
}

model Hours {
  id         String      @id @default(cuid())
  name       String      @unique
  range      String
  jobs       Job[]
  developers Developer[]
}

model Shift {
  id         String      @id @default(cuid())
  name       String      @unique
  from       String
  to         String
  jobs       Job[]
  developers Developer[]
}

model Timezone {
  id         String      @id @default(cuid())
  name       String      @unique
  value      Int
  jobs       Job[]
  developers Developer[]
}

// Chat

model Chat {
  id         String      @id @unique @default(cuid())
  name       String
  job        String?
  job_rel    Job?        @relation(fields: [job], references: [id])
  messages   Message[]
  developers Developer[]
  companies  Company[]
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
}

model Message {
  id        String   @id @default(cuid())
  content   String
  userId    Int
  sender    String
  receiver  String
  read      Boolean  @default(false)
  chatId    String?
  chat      Chat?    @relation(fields: [chatId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
